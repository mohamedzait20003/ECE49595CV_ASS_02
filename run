#!/bin/bash

echo "=== ECE 49595CV Image Classifier ==="
echo "ResNet-improved AlexNet Architecture"
echo "Expected Accuracy: 60-75% on balanced 4-class dataset"
echo ""

# Check if Python 3 is available
if ! command -v python3 &> /dev/null; then
    echo "Python 3 not found. Trying python..."
    if ! command -v python &> /dev/null; then
        echo "Error: Python not found!"
        echo "Please install Python 3.7+ and PyTorch"
        exit 1
    fi
    PYTHON_CMD=python
else
    PYTHON_CMD=python3
fi

echo "Using Python: $PYTHON_CMD"

# Check dependencies
echo "Checking dependencies..."
$PYTHON_CMD -c "import torch, torchvision, PIL, numpy; print('âœ“ All dependencies available')" 2>/dev/null
if [ $? -ne 0 ]; then
    echo "Installing dependencies..."
    $PYTHON_CMD -m pip install -r requirements.txt
fi

echo ""

# Run the classifier
echo "Running ResNet-improved CNN classifier..."
$PYTHON_CMD main.py

echo ""
echo "Training completed!"
